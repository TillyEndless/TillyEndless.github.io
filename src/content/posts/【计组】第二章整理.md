---
title: ã€è®¡ç»„ã€‘ç¬¬äºŒç« æ•´ç†
published: 2024-10-29
description: ''
image: ''
tags: [è®¡ç»„]
category: ''
draft: false 
lang: ''
---
# è®¡ç»„ç¬¬äºŒç« 
ä¸‰ç§è¯­è¨€ é«˜çº§è¯­è¨€ã€æ±‡ç¼–è¯­è¨€ã€æœºå™¨è¯­è¨€

## ç›®å½•
1. [ç« èŠ‚ç†è§£ç»´åº¦](#ç« èŠ‚ç†è§£ç»´åº¦)
2. [Outline](#Outline)
3. [Introduction](#Introduction)
4. [Arithmetic Operations](#Arithmetic-Operations)
5. [Operands](#Operands)
6. [Signed and Unsigned Numbers](#Signed-and-Unsigned-Numbers)
7. [Representing Instructions](#Representing-Instructions)
8. [Logic Operations](#Logic-Operations)

---

<a name="ç« èŠ‚ç†è§£ç»´åº¦"></a>

## ç« èŠ‚ç†è§£ç»´åº¦ï¼š
1. é«˜çº§è¯­è¨€ï¼ˆCè¯­è¨€ï¼‰â€”â€”â€”â€”æ±‡ç¼–è¯­è¨€
2. æ±‡ç¼–è¯­è¨€ï¼ˆæ±‡ç¼–æŒ‡ä»¤ï¼‰â€”â€”â€”â€”æœºå™¨è¯­è¨€ï¼ˆæœºå™¨ç ï¼‰

<a name="Outline"></a>

## Outline
* Introduction
* Operations of the computer hardware 
* Operands of the computer hardware
* Signed and a numbers
* Representing instructions in the computer
* Logical operations
* Instructions for making decision
* Supporting procedures in computer hardware
* Instruction addressing

<a name="Introduction"></a>

## Introduction
 instruction set: RISC-V
 P6
 RISC VS CISC å¯¹æ¯”è¡¨æ ¼
 P9
 Stored-program concept
 P12 
<a name="Arithmetic Operations"></a>

## Arithmetic Operations



<a name="Oprands"></a>

## Oprands
*  RISC-V has a 32 Ã— 64-bit register file
   *  Use for frequently accessed data
   *  64-bit data is called a â€œdoublewordâ€
       *  32 x 64-bit general purpose registers x0 to x31
   *  32-bit data is called a â€œwordâ€ **4ä¸ªå­—èŠ‚ä¸€ä¸ªâ€å­—â€œ**
![æˆªå±2024-10-17 15.39.38](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2015.39.38.png)
åœ¨å‡½æ•°è°ƒç”¨ä¸­ï¼Œå¯„å­˜å™¨ x0 æ˜¯å¦è¢«ä¿ç•™å–å†³äºè°ƒç”¨çº¦å®šã€‚
![æˆªå±2024-10-17 15.46.14](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2015.46.14.png)
![æˆªå±2024-10-17 15.46.29](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2015.46.29.png)
![æˆªå±2024-10-17 15.46.37](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2015.46.37.png)

* RISC-V does not require words to be aligned in 
memory
![æˆªå±2024-10-17 16.24.54](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2016.24.54.png)
P19
base register & offset
![æˆªå±2024-10-17 16.53.38](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2016.53.38.png)
P22 constant representation:
* constant oprands
* immediate operands

P23 Summary
![æˆªå±2024-10-17 17.00.00](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2017.00.00.png)

<a name="Signed and unsigned numbers"></a>

## Signed and unsigned numbers
1. Unsigned Binary Integers: ![æˆªå±2024-10-17 17.06.03](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2017.06.03.png)
2. 2s-Complement Signed Integers:![æˆªå±2024-10-17 17.06.34](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2017.06.34.png)
![æˆªå±2024-10-17 17.07.02](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2017.07.02.png)
    Signed Negation:Complement and add 1
    
P29 Sign Extension
![æˆªå±2024-10-17 17.13.15](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2017.13.15.png)
lb,lbu.

<a name="Representing Instructions"></a>

## Representing Instructions
![æˆªå±2024-10-17 18.33.41](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2018.33.41.png)
é‡ç‚¹ï¼šå¯„å­˜å™¨çš„çº¯æ•°å­—æ˜ å°„ï¼ŒRISC-VæŒ‡ä»¤ä½å®½ï¼Œcpcodeå³ä¸ºoperation codeï¼ˆæ“ä½œç ï¼‰
**å››ç§RISC-VæŒ‡ä»¤æ ¼å¼ï¼š**
![æˆªå±2024-10-17 18.40.33](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2018.40.33.png)
* Instruction fields
    * opcode: operation code
    * rd: destination register number
    * funct3: 3-bit function code (additional opcode)
    * rs1: the first source register number
    * rs2: the second source register number
    * funct7: 7-bit function code (additional opcode)
    
* Iå‹æŒ‡ä»¤ï¼š![æˆªå±2024-10-17 18.49.16](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2018.49.16.png)
* Så‹æŒ‡ä»¤ï¼š![æˆªå±2024-10-17 18.50.02](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2018.50.02.png)
* RISC-V instruction encodingï¼š![æˆªå±2024-10-17 18.51.24](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2018.51.24.png)

<a name="Logic Operations"></a>

## Logic Operations
![](/media/17291428769621/17291649815452.png)
shift left & rightéƒ½æ˜¯ç«‹å³æ•°æŒ‡ä»¤ï¼Ÿ

![](/media/17291428769621/17297414321545.png)

 Â· åŸºå€å¯»å€ï¼šld x19, 0(x10) # temp reg x19 = A[i]  å…¶ä¸­çš„0ï¼ˆx10ï¼‰å°±æ˜¯åŸºå€å¯»å€
 Â· å¸¸è§å¼ºåˆ¶è·³è½¬ï¼šbeq x0, x0, Loop æˆ– beq x0, x0, Exit

* jalrï¼ˆJump And Link Registerï¼‰æŒ‡ä»¤ï¼š
![](/media/17291428769621/17297537249051.png)
![](/media/17291428769621/17297540362309.png)![](/media/17291428769621/17297542048265.png)
* PCï¼šå½“å‰æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ä¼šè‡ªåŠ¨é€’å¢4ã€‚**å½“é‡åˆ°è·³è½¬ï¼ˆå¦‚ JALã€JALRï¼‰ã€åˆ†æ”¯æˆ–å‡½æ•°è°ƒç”¨ç­‰æŒ‡ä»¤æ—¶ï¼ŒPC ä¼šè¢«æ˜¾å¼ä¿®æ”¹ä»¥è·³è½¬åˆ°å…¶ä»–ä½ç½®æ‰§è¡Œã€‚**
* å…³äºAddress table:ï¼ˆä»¥x6ä¸ºtableåŸºåœ°å€ä¸ºä¾‹ï¼‰
![](/media/17291428769621/17297548751023.png)
![](/media/17291428769621/17297548872444.png)

* Basic Blocksï¼ˆåŸºæœ¬å—ï¼‰
    * å®šä¹‰ï¼šä¸€ç»„æ²¡æœ‰åˆ†æ”¯ï¼ˆè·³è½¬ï¼‰æŒ‡ä»¤çš„è¿ç»­æŒ‡ä»¤åºåˆ—
    ![](/media/17291428769621/17297573763056.png)
![](/media/17291428769621/17297574004820.png)






P40
UJ å’Œ  ï¼Ÿ type åœ°å€æ˜¯åŒæ•°çš„ï¼Œèˆå»ç¬¬ä¸€ä½ï¼ˆæ²¡æœ‰é›¶ä½ï¼‰ï¼ŒåŠ ä¸Šç¬¬åäºŒä½ï¼Œæ‰©å¤§èŒƒå›´ã€‚
P43 ä¹Ÿæ˜¯Iå‹æŒ‡ä»¤

jar jalr æ— æ¡ä»¶è·³è½¬ï¼Ÿ

**Cå’Œæ±‡ç¼–è½¬æ¢**

P59
Procedure/function be used to structure programsï¼š
* A stored subroutine that performs a specific task based on 
the parameters with which it is provided
    * easier to understand, allow code to be reused
* Six step
1. Place Parameters in a place where the procedure can access 
them
2. Transfer control to the procedureï¼šjump to 
3. Acquire the storage resources needed for the procedure
4. Perform the desired task
5. Place the result value in a place where the calling program can 
access it 
6. Return control to the point of origin



å †æ ˆï¼šä»é«˜åœ°å€å¾€ä½åœ°å€å»ºè®¾â€”â€”>push:æŒ‡é’ˆå¾€ä¸‹ç§»â€”â€”>è¿›æ ˆå‡ï¼Œå…¥æ ˆåŠ 

leaf procedureï¼šæ²¡æœ‰è¿›ä¸€æ­¥çš„å‡½æ•°è°ƒç”¨

ç†è§£ğŸŒ°ï¼š
![æˆªå±2024-10-17 14.25.44](/media/17291428769621/æˆªå±2024-10-17 14.25.44.png)
å»ºè®®å­¦ä¹ ä»ä¾‹å­å…¥æ‰‹ï¼Œä»å…·è±¡åˆ°ç†è®ºæ›´å®¹æ˜“æ¥å—

p82 PCç›¸å¯¹å¯»å€
![æˆªå±2024-10-17 14.52.43](/media/17291428769621/%E6%88%AA%E5%B1%8F2024-10-17%2014.52.43.png)
æœºå™¨ç ï¼š2000/2ï¼ˆå»é›¶ä½ï¼‰
32ä½æ•°å¯¹ï¼Œè€ƒè¯•é”™ä¸€ä½æ‰£åˆ†ï¼Œä¸è¦å†™æ¼æ•°å­—ï¼

P88 å››ç§å¯»å€æ–¹å¼ï¼š
![](/media/17291428769621/17295631673679.png)

P89 
æŸ¥è¡¨åˆ¤æ–­æŒ‡ä»¤æ˜¯åŠ æ³•
rs2,rs1åœ¨æ±‡ç¼–è¯­è¨€ï¼šä¸è¦å†™åï¼

P93
ï¼ˆæ•°æ®ï¼‰ç«äº‰â€”â€”>è§£å†³ï¼šåŒæ­¥æœºåˆ¶ åŸå­æ“ä½œï¼ˆç¡¬ä»¶æ”¯æŒï¼‰
atomic swap of registerï¼šä¸€æ¬¡è¯»å†™æ‰“åŒ…
![](/media/17291428769621/17298416812708.png)
![](/media/17291428769621/17298417167825.png)
     
P94 load reservedï¼šé¢„çº¦
rdï¼šç”¨äºç¡®è®¤æ“ä½œæ˜¯å¦æˆåŠŸï¼ˆä¸æˆåŠŸå¯èƒ½æ˜¯å› ä¸ºæ•°æ®æ”¹å˜/æœ‰å…¶ä»–è¿›ç¨‹åœ¨æ“ä½œï¼‰
è§£å†³ç«äº‰çš„æ–¹æ³•ï¼š![](/media/17291428769621/17295645628484.png)

æ³¨æ„ç†è§£ä¸¤ç§æ–¹æ³•çš„åŒºåˆ«ã€‚

P96 linkeré“¾æ¥å™¨  loader
ç¨‹åºç”±å¾ˆå¤šå¤´æ–‡ä»¶ç»„æˆï¼Œç”¨é“¾æ¥å™¨é“¾æ¥![](/media/17291428769621/17295652222832.png)
æ ¹æ®object file headerå°±èƒ½å®Œæˆé“¾æ¥ï¼Œè€Œä¸éœ€è¦æ‰«ææ•´ä¸ªç¨‹åºã€‚

image fileï¼šé•œåƒæ–‡ä»¶
åŠ¨æ€é“¾æ¥ï¼šè¿è¡Œæ›´å¤šå¼€é”€
åŠ¨æ€é™æ€ï¼šçœ‹éœ€æ±‚
Lazy Linkageï¼šä¹Ÿæ˜¯åŠ¨æ€é“¾æ¥
P102 å³è¾¹æ˜¯ç¬¬äºŒæ¬¡ï¼ˆå·²ç»é“¾æ¥è¿‡äº†ï¼‰ï¼Œå·¦è¾¹æ˜¯ç¬¬ä¸€æ¬¡ï¼ˆåŠ¨æ€é“¾æ¥ï¼‰![](/media/17291428769621/17295664311183.png)

é—´æ¥è·³è½¬æ–¹å¼ï¼šä¸ç”¨ä¿®æ”¹ä¸»ç¨‹åºï¼Œè·³è½¬å¯¹åº”çš„è¡¨å‚¨å­˜åœ¨å†…å­˜é‡Œâˆš
P103 Javaè™šæ‹Ÿæœº
P108
![](/media/17291428769621/17295671624850.png)
å››ä¸ªè¿ç»­çš„mvæ„ä¹‰ï¼Ÿç›¸å½“äºå †æ ˆã€‚å‰ä¸¤ä¸ªmvï¼šæ”¾è¿›å¯„å­˜å™¨ä¿æŠ¤ï¼Œé¿å…è¢«è¦†ç›–ã€‚åä¸¤ä¸ªï¼šæ‹¿å‡ºä¸‹ä¸€ä¸ªäº¤æ¢çš„ä¸¤ä¸ªå‚æ•°ã€‚
å¯„å­˜å™¨å­˜å‚¨å¯ä»¥ä»£æ›¿å †æ ˆï¼Œé™¤éå¯„å­˜å™¨spilling
bugï¼šå…¶å®næ²¡æœ‰è¢«ä¿æŠ¤å¥½ï¼Œx11ä¼šè¢«ä¸‹ä¸€æ¬¡å¾ªç¯æ”¹å˜ã€‚mvåº”è¯¥æ”¾åœ¨sortä¸€å¼€å§‹ï¼ˆå¾ªç¯å¤–é¢ï¼‰
æ€ä¹ˆæ”¹ï¼Ÿ

Smaller is fasterï¼šå¯„å­˜å™¨æ•°é‡å°‘ï¼Œè®¿é—®å¿«
